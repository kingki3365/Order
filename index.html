<div class="item" data-name="仙楂洛神茶" data-price="35" data-size="XL">
  <div class="item-header">
    <span>仙楂洛神茶</span>
    <span class="price">XL $35</span>
  </div>
  <div class="controls">
    <label>尺寸:
      <select class="size" onchange="updatePrice(this)">
        <option value="XL" data-price="35">XL $35</option>
        <option value="L" data-price="30">L $30</option>
      </select>
    </label>
    <label>甜度:
      <select class="sweetness">
        <option value="正常甜">正常甜</option>
        <option value="8分甜">8分甜</option>
        <option value="5分甜">5分甜</option>
        <option value="3分甜">3分甜</option>
        <option value="2分甜">2分甜</option>
        <option value="1分甜">1分甜</option>
        <option value="0.5分甜">0.5分甜</option>
        <option value="無糖">無糖</option>
      </select>
    </label>
    <label>冰量:
      <select class="ice">
        <option value="正常冰">正常冰</option>
        <option value="少冰">少冰</option>
        <option value="微冰">微冰</option>
        <option value="去冰">去冰</option>
        <option value="完全去冰">完全去冰</option>
      </select>
    </label>
    <label>數量:
      <input type="number" min="1" value="1" class="quantity">
    </label>
    <button onclick="addToOrder(this)">加入訂單</button>
  </div>
</div>

<div class="item" data-name="青蘋果綠茶" data-price="40" data-size="XL">
  <div class="item-header">
    <span>青蘋果綠茶</span>
    <span class="price">XL $40</span>
  </div>
  <div class="controls">
    <label>尺寸:
      <select class="size" onchange="updatePrice(this)">
        <option value="XL" data-price="40">XL $40</option>
        <option value="L" data-price="35">L $35</option>
      </select>
    </label>
    <label>甜度:
      <select class="sweetness">
        <option value="正常甜">正常甜</option>
        <option value="8分甜">8分甜</option>
        <option value="5分甜">5分甜</option>
        <option value="3分甜">3分甜</option>
        <option value="2分甜">2分甜</option>
        <option value="1分甜">1分甜</option>
        <option value="0.5分甜">0.5分甜</option>
        <option value="無糖">無糖</option>
      </select>
    </label>
    <label>冰量:
      <select class="ice">
        <option value="正常冰">正常冰</option>
        <option value="少冰">少冰</option>
        <option value="微冰">微冰</option>
        <option value="去冰">去冰</option>
        <option value="完全去冰">完全去冰</option>
      </select>
    </label>
    <label>數量:
      <input type="number" min="1" value="1" class="quantity">
    </label>
    <button onclick="addToOrder(this)">加入訂單</button>
  </div>
</div>

<script>
function updatePrice(selectElement) {
  const itemDiv = selectElement.closest('.item');
  const priceSpan = itemDiv.querySelector('.price');
  const selectedOption = selectElement.selectedOptions[0];
  const price = selectedOption.getAttribute('data-price');
  const size = selectedOption.value;
  priceSpan.textContent = `${size} $${price}`;
  itemDiv.setAttribute('data-price', price);
  itemDiv.setAttribute('data-size', size);
}

function addToOrder(button) {
  const itemDiv = button.closest('.item');
  const name = itemDiv.getAttribute('data-name');
  const price = parseFloat(itemDiv.getAttribute('data-price'));
  const size = itemDiv.getAttribute('data-size');

  const sweetness = itemDiv.querySelector('.sweetness').value;
  const ice = itemDiv.querySelector('.ice').value;
  const quantity = parseInt(itemDiv.querySelector('.quantity').value, 10);

  if (quantity < 1 || isNaN(quantity)) {
    alert('數量必須是正整數');
    return;
  }

  // 這裡你可以把資料送到訂單陣列、後端或 console 查看
  console.log({
    商品名稱: name,
    尺寸: size,
    單價: price,
    甜度: sweetness,
    冰量: ice,
    數量: quantity,
    小計: price * quantity
  });

  alert(`${name} (${size}) 已加入訂單，數量：${quantity}`);
}
</script>